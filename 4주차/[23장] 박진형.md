# 23장 실행 컨텍스트
실행 컨텍스트란?
> 코드가 실행되는 환경.  
> 모든 자바스크립트 코드는 실행 컨텍스트 내부에서 실행

## 소스코드의 타입

ECMAScript 사양은 소스코드를 4가지 타입으로 구분한다.
>- 전역 코드: 전역에 존재하는 소스코드. 전역에 정의된 함수, 클래스 등의 내부 코드는 포함되지 않는다.
>- 함수 코드: 함수 내부에 존재하는 소스코드. 함수 내부에 중첩된 함수, 클래스 등의 내부 코드는 포함되지 않는다.
>- eval 코드: eval 함수에 인수로 전달되는 소스코드
>- 모듈 코드: 모듈 내부에 존재하는 소스코드. 모듈 내부의 함수, 클래스 등의 내부 코드는 포함되지 않는다.

구분 이유는 소스코드의 타입에 따라 
실행 컨텍스트를 생성 및 관리하는 과정이 다르기 때문

>- 전역 코드 ---> 전역 실행 컨텍스트
>- 함수 코드 ---> 함수 실행 컨텍스트
>- eval 코드 ---> eval 실행 컨텍스트
>- 모듈 코드 ---> 모듈 실행 컨텍스트

이런 식으로 소스코드를 평가하여 그에 맞는 실행 컨텍스트를 생성


## 소스코드의 평가와 실행과정
1. 소스코드의 평가
> 실행 컨텍스트를 생성  
> 변수/함수 등의 선언문만 먼저 실행하여 실행 컨텍스트에 등록

2. 소스코드의 실행
> 평가 과정이 끝나면 선언문을 제외한 소스코드가 순차적으로 실행  
> 실행에 필요한 변수/함수는 실행 컨텍스트에서 찾아서 사용  
> 변수 값 변경 등의 소스코드 실행 결과는 다시 실행 컨텍스트에 등록

예제 코드
```
let x;
x = 1;
```
1. 소스코드 평가 과정
> 선언문 let x; 실행  
> 변수 x는 실행 컨텍스트에 등록되고 undefined로 초기화

2. 소스코드 실행 과정
> 실행 컨텍스트에서 변수 x 확인  
> 새로운 값 1 할당 후 다시 실행 컨텍스트에 등록

## 실행 컨텍스트 스택
> 실행 컨텍스트는 스택으로 관리 되는데  
> 이를 실행 컨텍스트 스택 또는 콜 스택 이라고함

예제 코드
```
const x = 1;

function foo() {
    const y = 2;

    function bar() {
        const z = 3;
    }
    
    bar();
}

foo(); 
```
1. 전역 코드 평가/실행
2. foo 함수 코드 평가/실행
3. bar 함수 코드 평가/실행
4. foo 함수 코드로 복귀
5. 전역 코드로 복귀


## 실행 컨텍스트의 역할
>- 선언에 의해 생성된 변수/함수/클래스를 등록하고 상태 변화를 관리(즉, 코드의 실행 결과를 실제로 관리하는 영역)
>- 코드의 실행 순서 관리
>- 스코프 관리: 변수/함수/클래스가 어느 스코프에 등록되야하고 검색되어야하는지 관리 
